<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Queueing Theory Calculator - Analyze M/M/1, M/M/c, M/G/1, and M/D/1 queueing systems">
    <title>Queueing Theory Calculator | Industrial Engineering Calculators</title>
    <style>
        /* Consistent with existing style */
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --text-color: #333;
            --text-light: #7f8c8d;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: #f5f7fa;
        }
        
        header {
            background-color: var(--primary-color);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: bold;
        }
        
        .logo span {
            color: var(--secondary-color);
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 1.5rem;
        }
        
        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        
        nav ul li a:hover {
            color: var(--secondary-color);
        }
        
        .page-hero {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 2rem 0;
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .page-hero h1 {
            font-size: 2.2rem;
        }
        
        .content-section {
            background-color: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        
        .content-section h2 {
            color: var(--secondary-color);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--light-color);
        }
        
        .calculator-intro {
            margin-bottom: 2rem;
            line-height: 1.7;
        }
        
        .formula-box {
            background-color: #f8f9fa;
            border-left: 4px solid var(--secondary-color);
            padding: 1rem;
            margin: 1.5rem 0;
            font-family: monospace;
            font-size: 1.1rem;
        }
        
        .model-selector {
            margin-bottom: 2rem;
        }
        
        .model-tabs {
            display: flex;
            flex-wrap: wrap;
            border-bottom: 1px solid #ddd;
            margin-bottom: 1.5rem;
        }
        
        .model-tab {
            padding: 0.8rem 1.5rem;
            cursor: pointer;
            border: 1px solid transparent;
            border-bottom: none;
            margin-right: 0.5rem;
            border-radius: 5px 5px 0 0;
            background-color: #f1f1f1;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .model-tab.active {
            background-color: white;
            border-color: #ddd;
            border-bottom-color: white;
            color: var(--secondary-color);
            font-weight: 500;
        }
        
        .model-tab:hover:not(.active) {
            background-color: #e9e9e9;
        }
        
        .model-content {
            display: none;
        }
        
        .model-content.active {
            display: block;
        }
        
        .input-group {
            margin-bottom: 1.5rem;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .input-group input, .input-group select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .input-row {
            display: flex;
            gap: 1rem;
        }
        
        .input-row .input-group {
            flex: 1;
        }
        
        .calculate-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .calculate-btn:hover {
            background-color: #2980b9;
        }
        
        .result-box {
            margin-top: 2rem;
            padding: 1.5rem;
            background-color: #f8f9fa;
            border-radius: 5px;
            border-left: 4px solid var(--secondary-color);
            display: none;
        }
        
        .result-box h3 {
            margin-bottom: 1rem;
            color: var(--primary-color);
        }
        
        .result-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--secondary-color);
        }
        
        .metric-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .metric-card {
            padding: 1rem;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .metric-card h4 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }
        
        .metric-card .metric-value {
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .metric-card.queue .metric-value {
            color: #3498db;
        }
        
        .metric-card.time .metric-value {
            color: #f39c12;
        }
        
        .metric-card.utilization .metric-value {
            color: #2ecc71;
        }
        
        .metric-card.probability .metric-value {
            color: #9b59b6;
        }
        
        .queue-visual {
            width: 100%;
            height: 150px;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            margin: 1.5rem 0;
            position: relative;
            overflow: hidden;
        }
        
        .server {
            position: absolute;
            width: 40px;
            height: 40px;
            background-color: var(--secondary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .customer {
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: var(--accent-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transition: left 0.5s ease;
        }
        
        .queue-line {
            position: absolute;
            height: 10px;
            background-color: var(--primary-color);
            border-radius: 5px;
        }
        
        .examples-section {
            margin-top: 3rem;
        }
        
        .example {
            margin-bottom: 1.5rem;
            padding: 1rem;
            background-color: #f8f9fa;
            border-radius: 5px;
        }
        
        .example h4 {
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        
        table, th, td {
            border: 1px solid #ddd;
        }
        
        th, td {
            padding: 0.75rem;
            text-align: left;
        }
        
        th {
            background-color: #f2f2f2;
        }
        
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 2rem 0;
            text-align: center;
            margin-top: 2rem;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            margin-bottom: 1.5rem;
        }
        
        .footer-links a {
            color: white;
            margin: 0 1rem;
            text-decoration: none;
        }
        
        .footer-links a:hover {
            text-decoration: underline;
        }
        
        .copyright {
            color: var(--text-light);
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            nav ul {
                margin-top: 1rem;
                justify-content: center;
            }
            
            nav ul li {
                margin: 0 0.75rem;
            }
            
            .model-tabs {
                flex-direction: column;
            }
            
            .model-tab {
                border-radius: 0;
                margin-right: 0;
                border-bottom: 1px solid #ddd;
            }
            
            .input-row {
                flex-direction: column;
                gap: 0;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">Industrial <span>Engineering</span> Calculators</div>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="terms.html">Terms</a></li>
                    <li><a href="privacy.html">Privacy Policy</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <section class="page-hero">
        <div class="container">
            <h1>Queueing Theory Calculator</h1>
            <p>Analyze M/M/1, M/M/c, M/G/1, and M/D/1 queueing systems</p>
        </div>
    </section>
    
    <main class="container">
        <section class="content-section">
            <div class="calculator-intro">
                <h2>Queueing System Analysis</h2>
                <p>Queueing theory is the mathematical study of waiting lines or queues. This calculator helps analyze different queueing models to understand system performance and optimize service operations.</p>
                
                <div class="formula-box">
                    Key Metrics: L = λW (Little's Law), ρ = λ/μ (Utilization), P₀ = 1 - ρ (Empty system probability)
                </div>
                
                <p>Where:</p>
                <ul>
                    <li><strong>L</strong> = Average number of customers in the system</li>
                    <li><strong>λ</strong> = Arrival rate (customers per time unit)</li>
                    <li><strong>W</strong> = Average time a customer spends in the system</li>
                    <li><strong>μ</strong> = Service rate (customers per time unit)</li>
                    <li><strong>ρ</strong> = Server utilization factor</li>
                </ul>
            </div>
            
            <div class="model-selector">
                <h3>Queueing Model</h3>
                <p>Select the queueing model you want to analyze:</p>
                
                <div class="model-tabs">
                    <div class="model-tab active" data-model="mm1">M/M/1</div>
                    <div class="model-tab" data-model="mmc">M/M/c</div>
                    <div class="model-tab" data-model="mg1">M/G/1</div>
                    <div class="model-tab" data-model="md1">M/D/1</div>
                </div>
                
                <!-- M/M/1 Model -->
                <div class="model-content active" id="mm1-model">
                    <h3>M/M/1 Queue</h3>
                    <p>Single server queue with Poisson arrivals and exponential service times.</p>
                    
                    <form id="mm1-form">
                        <div class="input-row">
                            <div class="input-group">
                                <label for="mm1-arrival-rate">Arrival Rate (λ) - customers per time unit:</label>
                                <input type="number" id="mm1-arrival-rate" min="0" step="0.1" required>
                            </div>
                            
                            <div class="input-group">
                                <label for="mm1-service-rate">Service Rate (μ) - customers per time unit:</label>
                                <input type="number" id="mm1-service-rate" min="0" step="0.1" required>
                            </div>
                        </div>
                        
                        <button type="submit" class="calculate-btn">Analyze M/M/1 Queue</button>
                    </form>
                </div>
                
                <!-- M/M/c Model -->
                <div class="model-content" id="mmc-model">
                    <h3>M/M/c Queue</h3>
                    <p>Multiple server queue with Poisson arrivals and exponential service times.</p>
                    
                    <form id="mmc-form">
                        <div class="input-row">
                            <div class="input-group">
                                <label for="mmc-arrival-rate">Arrival Rate (λ) - customers per time unit:</label>
                                <input type="number" id="mmc-arrival-rate" min="0" step="0.1" required>
                            </div>
                            
                            <div class="input-group">
                                <label for="mmc-service-rate">Service Rate per Server (μ) - customers per time unit:</label>
                                <input type="number" id="mmc-service-rate" min="0" step="0.1" required>
                            </div>
                        </div>
                        
                        <div class="input-group">
                            <label for="mmc-servers">Number of Servers (c):</label>
                            <input type="number" id="mmc-servers" min="1" step="1" value="2" required>
                        </div>
                        
                        <button type="submit" class="calculate-btn">Analyze M/M/c Queue</button>
                    </form>
                </div>
                
                <!-- M/G/1 Model -->
                <div class="model-content" id="mg1-model">
                    <h3>M/G/1 Queue</h3>
                    <p>Single server queue with Poisson arrivals and general service time distribution.</p>
                    
                    <form id="mg1-form">
                        <div class="input-row">
                            <div class="input-group">
                                <label for="mg1-arrival-rate">Arrival Rate (λ) - customers per time unit:</label>
                                <input type="number" id="mg1-arrival-rate" min="0" step="0.1" required>
                            </div>
                            
                            <div class="input-group">
                                <label for="mg1-service-rate">Average Service Rate (μ) - customers per time unit:</label>
                                <input type="number" id="mg1-service-rate" min="0" step="0.1" required>
                            </div>
                        </div>
                        
                        <div class="input-group">
                            <label for="mg1-service-variance">Service Time Variance (σ²):</label>
                            <input type="number" id="mg1-service-variance" min="0" step="0.1" required>
                        </div>
                        
                        <button type="submit" class="calculate-btn">Analyze M/G/1 Queue</button>
                    </form>
                </div>
                
                <!-- M/D/1 Model -->
                <div class="model-content" id="md1-model">
                    <h3>M/D/1 Queue</h3>
                    <p>Single server queue with Poisson arrivals and deterministic (constant) service times.</p>
                    
                    <form id="md1-form">
                        <div class="input-row">
                            <div class="input-group">
                                <label for="md1-arrival-rate">Arrival Rate (λ) - customers per time unit:</label>
                                <input type="number" id="md1-arrival-rate" min="0" step="0.1" required>
                            </div>
                            
                            <div class="input-group">
                                <label for="md1-service-rate">Service Rate (μ) - customers per time unit:</label>
                                <input type="number" id="md1-service-rate" min="0" step="0.1" required>
                            </div>
                        </div>
                        
                        <button type="submit" class="calculate-btn">Analyze M/D/1 Queue</button>
                    </form>
                </div>
            </div>
            
            <div class="result-box" id="queue-result">
                <h3>Results</h3>
                <p id="model-description"></p>
                
                <div class="metric-results">
                    <div class="metric-card utilization">
                        <h4>Utilization (ρ)</h4>
                        <div class="metric-value" id="utilization"></div>
                        <p>Server busy probability</p>
                    </div>
                    
                    <div class="metric-card queue">
                        <h4>Avg in Queue (Lₙ)</h4>
                        <div class="metric-value" id="avg-queue"></div>
                        <p>Customers waiting</p>
                    </div>
                    
                    <div class="metric-card queue">
                        <h4>Avg in System (L)</h4>
                        <div class="metric-value" id="avg-system"></div>
                        <p>Total customers</p>
                    </div>
                    
                    <div class="metric-card time">
                        <h4>Queue Time (Wₙ)</h4>
                        <div class="metric-value" id="queue-time"></div>
                        <p>Time spent waiting</p>
                    </div>
                    
                    <div class="metric-card time">
                        <h4>System Time (W)</h4>
                        <div class="metric-value" id="system-time"></div>
                        <p>Total time in system</p>
                    </div>
                    
                    <div class="metric-card probability">
                        <h4>P(0)</h4>
                        <div class="metric-value" id="prob-empty"></div>
                        <p>System empty probability</p>
                    </div>
                </div>
                
                <div class="queue-visual" id="queue-visual">
                    <!-- Visualization will be added by JavaScript -->
                </div>
                
                <h4>Probability Distribution</h4>
                <table id="probability-table">
                    <thead>
                        <tr>
                            <th>n</th>
                            <th>P(n) in System</th>
                            <th>P(≥n) in System</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Will be populated by JavaScript -->
                    </tbody>
                </table>
                
                <h4>Interpretation Guide</h4>
                <table>
                    <tr>
                        <th>Utilization (ρ)</th>
                        <th>System State</th>
                        <th>Recommendation</th>
                    </tr>
                    <tr>
                        <td>0% - 60%</td>
                        <td>Underutilized</td>
                        <td>Consider reducing capacity</td>
                    </tr>
                    <tr>
                        <td>60% - 80%</td>
                        <td>Well-utilized</td>
                        <td>Good balance</td>
                    </tr>
                    <tr>
                        <td>80% - 100%</td>
                        <td>Overutilized</td>
                        <td>Risk of long queues - add capacity</td>
                    </tr>
                    <tr>
                        <td>≥100%</td>
                        <td>Unstable</td>
                        <td>Queue will grow indefinitely</td>
                    </tr>
                </table>
            </div>
            
            <div class="examples-section">
                <h3>Practical Examples</h3>
                
                <div class="example">
                    <h4>Example 1: M/M/1 - Small Store Checkout</h4>
                    <p>Arrival Rate: 4 customers/hour | Service Rate: 5 customers/hour</p>
                    <p>Utilization: 80% | Avg in System: 4 customers | Avg Wait: 48 minutes</p>
                </div>
                
                <div class="example">
                    <h4>Example 2: M/M/3 - Call Center</h4>
                    <p>Arrival Rate: 15 calls/hour | Service Rate: 6 calls/hour | Servers: 3</p>
                    <p>Utilization: 83% | Avg in System: 5.2 calls | Avg Wait: 6.5 minutes</p>
                </div>
                
                <div class="example">
                    <h4>Example 3: M/G/1 - Repair Shop</h4>
                    <p>Arrival Rate: 2 jobs/hour | Service Rate: 3 jobs/hour | Variance: 0.2</p>
                    <p>Utilization: 67% | Avg in System: 1.27 jobs | Avg Wait: 0.47 hours</p>
                </div>
                
                <div class="example">
                    <h4>Example 4: M/D/1 - Automated Process</h4>
                    <p>Arrival Rate: 9 units/hour | Service Rate: 10 units/hour</p>
                    <p>Utilization: 90% | Avg in System: 4.95 units | Avg Wait: 0.45 hours</p>
                </div>
            </div>
            
            <div class="calculator-intro">
                <h3>Queueing Model Comparison</h3>
                <table>
                    <tr>
                        <th>Model</th>
                        <th>Arrivals</th>
                        <th>Service</th>
                        <th>Servers</th>
                        <th>Typical Use Cases</th>
                    </tr>
                    <tr>
                        <td>M/M/1</td>
                        <td>Poisson</td>
                        <td>Exponential</td>
                        <td>1</td>
                        <td>Single checkout, simple systems</td>
                    </tr>
                    <tr>
                        <td>M/M/c</td>
                        <td>Poisson</td>
                        <td>Exponential</td>
                        <td>Multiple</td>
                        <td>Call centers, multi-server systems</td>
                    </tr>
                    <tr>
                        <td>M/G/1</td>
                        <td>Poisson</td>
                        <td>General</td>
                        <td>1</td>
                        <td>Repair shops, variable service times</td>
                    </tr>
                    <tr>
                        <td>M/D/1</td>
                        <td>Poisson</td>
                        <td>Deterministic</td>
                        <td>1</td>
                        <td>Automated processes, constant service</td>
                    </tr>
                </table>
            </div>
        </section>
    </main>
    
    <footer>
        <div class="container">
            <div class="footer-links">
                <a href="index.html">Home</a>
                <a href="about.html">About</a>
                <a href="terms.html">Terms of Service</a>
                <a href="privacy.html">Privacy Policy</a>
                <a href="contact.html">Contact Us</a>
            </div>
            <p class="copyright">&copy; 2023 Industrial Engineering Calculators. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Model tab switching
        const modelTabs = document.querySelectorAll('.model-tab');
        const modelContents = document.querySelectorAll('.model-content');
        
        modelTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // Remove active class from all tabs and contents
                modelTabs.forEach(t => t.classList.remove('active'));
                modelContents.forEach(c => c.classList.remove('active'));
                
                // Add active class to clicked tab and corresponding content
                tab.classList.add('active');
                const model = tab.getAttribute('data-model');
                document.getElementById(`${model}-model`).classList.add('active');
            });
        });
        
        // M/M/1 Queue Calculation
        document.getElementById('mm1-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const lambda = parseFloat(document.getElementById('mm1-arrival-rate').value);
            const mu = parseFloat(document.getElementById('mm1-service-rate').value);
            
            if (isNaN(lambda) || isNaN(mu)) {
                alert('Please enter valid arrival and service rates');
                return;
            }
            
            const rho = lambda / mu;
            
            if (rho >= 1) {
                alert('Warning: Utilization ≥ 100%. System is unstable (queue will grow indefinitely)');
                // Continue calculation but note the instability
            }
            
            // Calculate metrics
            const L = rho / (1 - rho); // Avg in system
            const Lq = rho * rho / (1 - rho); // Avg in queue
            const W = 1 / (mu - lambda); // Avg time in system
            const Wq = rho / (mu - lambda); // Avg time in queue
            const P0 = 1 - rho; // Prob system empty
            
            displayResults(
                "M/M/1 Queue - Single server with Poisson arrivals and exponential service times",
                rho, Lq, L, Wq, W, P0, 
                lambda, mu, 1, 0
            );
            
            // Generate probability distribution
            generateProbabilityDistribution(rho, 10);
            
            // Create visualization
            createQueueVisualization(1, rho);
        });
        
        // M/M/c Queue Calculation
        document.getElementById('mmc-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const lambda = parseFloat(document.getElementById('mmc-arrival-rate').value);
            const mu = parseFloat(document.getElementById('mmc-service-rate').value);
            const c = parseInt(document.getElementById('mmc-servers').value);
            
            if (isNaN(lambda) || isNaN(mu) || isNaN(c)) {
                alert('Please enter valid arrival rate, service rate, and number of servers');
                return;
            }
            
            const rho = lambda / (c * mu);
            
            if (rho >= 1) {
                alert('Warning: Utilization ≥ 100%. System is unstable (queue will grow indefinitely)');
                // Continue calculation but note the instability
            }
            
            // Calculate P0 (probability of 0 customers in system)
            let sum = 0;
            for (let n = 0; n < c; n++) {
                sum += Math.pow(lambda / mu, n) / factorial(n);
            }
            sum += Math.pow(lambda / mu, c) / (factorial(c) * (1 - rho));
            const P0 = 1 / sum;
            
            // Calculate other metrics
            const Lq = (P0 * Math.pow(lambda / mu, c) * rho) / (factorial(c) * Math.pow(1 - rho, 2));
            const Wq = Lq / lambda;
            const W = Wq + (1 / mu);
            const L = lambda * W;
            
            displayResults(
                `M/M/c Queue - ${c} servers with Poisson arrivals and exponential service times`,
                rho, Lq, L, Wq, W, P0,
                lambda, mu, c, 0
            );
            
            // Generate probability distribution
            generateProbabilityDistributionMMc(lambda, mu, c, P0, 10);
            
            // Create visualization
            createQueueVisualization(c, rho);
        });
        
        // M/G/1 Queue Calculation
        document.getElementById('mg1-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const lambda = parseFloat(document.getElementById('mg1-arrival-rate').value);
            const mu = parseFloat(document.getElementById('mg1-service-rate').value);
            const variance = parseFloat(document.getElementById('mg1-service-variance').value);
            
            if (isNaN(lambda) || isNaN(mu) || isNaN(variance)) {
                alert('Please enter valid arrival rate, service rate, and variance');
                return;
            }
            
            const rho = lambda / mu;
            
            if (rho >= 1) {
                alert('Warning: Utilization ≥ 100%. System is unstable (queue will grow indefinitely)');
                // Continue calculation but note the instability
            }
            
            // Calculate metrics using Pollaczek-Khinchin formula
            const ES2 = variance + (1 / (mu * mu)); // E[S²]
            const Lq = (lambda * lambda * ES2) / (2 * (1 - rho));
            const Wq = Lq / lambda;
            const W = Wq + (1 / mu);
            const L = lambda * W;
            const P0 = 1 - rho;
            
            displayResults(
                "M/G/1 Queue - Single server with Poisson arrivals and general service times",
                rho, Lq, L, Wq, W, P0,
                lambda, mu, 1, variance
            );
            
            // Note: Probability distribution not shown for M/G/1 as it's complex
            document.getElementById('probability-table').innerHTML = `
                <thead>
                    <tr>
                        <th>Note</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Probability distribution not calculated for M/G/1 queues due to complexity</td>
                    </tr>
                </tbody>
            `;
            
            // Create visualization
            createQueueVisualization(1, rho);
        });
        
        // M/D/1 Queue Calculation
        document.getElementById('md1-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const lambda = parseFloat(document.getElementById('md1-arrival-rate').value);
            const mu = parseFloat(document.getElementById('md1-service-rate').value);
            
            if (isNaN(lambda) || isNaN(mu)) {
                alert('Please enter valid arrival and service rates');
                return;
            }
            
            const rho = lambda / mu;
            
            if (rho >= 1) {
                alert('Warning: Utilization ≥ 100%. System is unstable (queue will grow indefinitely)');
                // Continue calculation but note the instability
            }
            
            // Calculate metrics for M/D/1 (special case of M/G/1 with variance = 0)
            const ES2 = 1 / (mu * mu); // E[S²] for deterministic service
            const Lq = (lambda * lambda * ES2) / (2 * (1 - rho));
            const Wq = Lq / lambda;
            const W = Wq + (1 / mu);
            const L = lambda * W;
            const P0 = 1 - rho;
            
            displayResults(
                "M/D/1 Queue - Single server with Poisson arrivals and deterministic service times",
                rho, Lq, L, Wq, W, P0,
                lambda, mu, 1, 0
            );
            
            // Generate probability distribution (approximation)
            generateProbabilityDistribution(rho, 10);
            
            // Create visualization
            createQueueVisualization(1, rho);
        });
        
        // Helper function to display results
        function displayResults(modelDesc, rho, Lq, L, Wq, W, P0, lambda, mu, c, variance) {
            document.getElementById('model-description').textContent = modelDesc;
            document.getElementById('utilization').textContent = (rho * 100).toFixed(1) + '%';
            document.getElementById('avg-queue').textContent = Lq.toFixed(2);
            document.getElementById('avg-system').textContent = L.toFixed(2);
            document.getElementById('queue-time').textContent = Wq.toFixed(2) + ' time units';
            document.getElementById('system-time').textContent = W.toFixed(2) + ' time units';
            document.getElementById('prob-empty').textContent = P0.toFixed(4);
            
            document.getElementById('queue-result').style.display = 'block';
        }
        
        // Helper function to generate probability distribution for M/M/1 and M/D/1
        function generateProbabilityDistribution(rho, maxN) {
            const tableBody = document.querySelector('#probability-table tbody');
            tableBody.innerHTML = '';
            
            for (let n = 0; n <= maxN; n++) {
                const Pn = (1 - rho) * Math.pow(rho, n);
                const Pgeqn = Math.pow(rho, n); // P(≥n) = ρⁿ
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${n}</td>
                    <td>${Pn.toFixed(4)}</td>
                    <td>${Pgeqn.toFixed(4)}</td>
                `;
                tableBody.appendChild(row);
            }
        }
        
        // Helper function to generate probability distribution for M/M/c
        function generateProbabilityDistributionMMc(lambda, mu, c, P0, maxN) {
            const tableBody = document.querySelector('#probability-table tbody');
            tableBody.innerHTML = '';
            const rho = lambda / (c * mu);
            
            for (let n = 0; n <= maxN; n++) {
                let Pn;
                if (n < c) {
                    Pn = (Math.pow(lambda / mu, n) / factorial(n)) * P0;
                } else {
                    Pn = (Math.pow(lambda / mu, n) / (factorial(c) * Math.pow(c, n - c))) * P0;
                }
                
                // P(≥n) is more complex to calculate, so we'll leave it blank for M/M/c
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${n}</td>
                    <td>${Pn.toFixed(4)}</td>
                    <td>-</td>
                `;
                tableBody.appendChild(row);
            }
        }
        
        // Helper function to create queue visualization
        function createQueueVisualization(servers, rho) {
            const visual = document.getElementById('queue-visual');
            visual.innerHTML = '';
            
            // Calculate number of customers to show (up to 10)
            const customersInSystem = Math.min(10, Math.ceil(rho * 5 / (1 - rho)) || 1);
            const customersInQueue = Math.max(0, customersInSystem - servers);
            
            // Create servers
            for (let i = 0; i < servers; i++) {
                const server = document.createElement('div');
                server.className = 'server';
                server.textContent = i+1;
                server.style.left = `${70 + (i * 50)}px`;
                server.style.top = '50px';
                visual.appendChild(server);
            }
            
            // Create queue line
            const queueLine = document.createElement('div');
            queueLine.className = 'queue-line';
            queueLine.style.width = '30px';
            queueLine.style.left = '20px';
            queueLine.style.top = '55px';
            visual.appendChild(queueLine);
            
            // Create customers in queue
            for (let i = 0; i < customersInQueue; i++) {
                const customer = document.createElement('div');
                customer.className = 'customer';
                customer.textContent = i+1;
                customer.style.left = `${25 + (i * 10)}px`;
                customer.style.top = '50px';
                visual.appendChild(customer);
            }
            
            // Create customers being served
            for (let i = 0; i < Math.min(servers, customersInSystem); i++) {
                const customer = document.createElement('div');
                customer.className = 'customer';
                customer.textContent = customersInQueue + i + 1;
                customer.style.left = `${65 + (i * 50)}px`;
                customer.style.top = '20px';
                visual.appendChild(customer);
            }
        }
        
        // Helper function for factorial calculation
        function factorial(n) {
            if (n === 0 || n === 1) return 1;
            let result = 1;
            for (let i = 2; i <= n; i++) {
                result *= i;
            }
            return result;
        }
    </script>
</body>
</html>