<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3BSHG1DE6V"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-3BSHG1DE6V');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linear Programming Calculator | Industrial Engineering Calculators</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --text-color: #333;
            --text-light: #7f8c8d;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: #f5f7fa;
            transition: margin-left 0.3s;
        }
        
        /* xxxx navigation start xxxxx */
        .sidebar-toggle {
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 1000;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 1.2rem;
            display: block; /* Changed from none to block */
        }
        
        .sidebar {
            position: fixed;
            top: 0;
            left: -300px;
            width: 300px;
            height: 100%;
            background-color: var(--light-color);
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            overflow-y: auto;
            transition: left 0.3s;
            z-index: 999;
            padding: 20px 0;
        }
        
        .sidebar.open {
            left: 0;
        }
        
        .sidebar-header {
            padding: 0 20px 15px;
            border-bottom: 1px solid #ddd;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .sidebar-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-color);
        }
        
        .sidebar-category {
            margin-bottom: 10px;
        }
        
        .sidebar-category-header {
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        
        .sidebar-category-header:hover {
            background-color: rgba(0,0,0,0.05);
        }
        
        .sidebar-category-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .sidebar-category.open .sidebar-category-content {
            max-height: 1000px;
        }
        
        .sidebar-link {
            display: block;
            padding: 8px 20px 8px 35px;
            color: var(--text-color);
            text-decoration: none;
            transition: background-color 0.3s;
        }
        
        .sidebar-link:hover {
            background-color: rgba(0,0,0,0.05);
        }
        
        body.sidebar-open {
            overflow: hidden;
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 998;
            display: none;
        }
        
        .overlay.active {
            display: block;
        }
        
        /* Add color coding to sidebar categories */
        .sidebar-category-header.production {
            color: var(--production-color);
        }
        .sidebar-category-header.quality {
            color: var(--quality-color);
        }
        .sidebar-category-header.statistics {
            color: var(--statistics-color);
        }
        .sidebar-category-header.inventory {
            color: var(--inventory-color);
        }
        .sidebar-category-header.workstudy {
            color: var(--workstudy-color);
        }
        .sidebar-category-header.ergonomics {
            color: var(--ergonomics-color);
        }
        .sidebar-category-header.operations {
            color: var(--operations-color);
        }
        .sidebar-category-header.economy {
            color: var(--economy-color);
        }
        .sidebar-category-header.facilities {
            color: var(--facilities-color);
        }
        .sidebar-category-header.reliability {
            color: var(--reliability-color);
        }
        /* xxxx navigation end xxxxx */
        
        header {
            background-color: var(--primary-color);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: bold;
        }
        
        .logo span {
            color: var(--secondary-color);
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 1.5rem;
        }
        
        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        
        nav ul li a:hover {
            color: var(--secondary-color);
        }
        
        .page-hero {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 2rem 0;
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .page-hero h1 {
            font-size: 2.2rem;
        }
        
        .content-section {
            background-color: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        
        .content-section h2 {
            color: var(--secondary-color);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--light-color);
        }
        
        .calculator-intro {
            margin-bottom: 2rem;
            line-height: 1.7;
        }
        
        .formula-box {
            background-color: #f8f9fa;
            border-left: 4px solid var(--secondary-color);
            padding: 1rem;
            margin: 1.5rem 0;
            font-family: monospace;
            font-size: 1.1rem;
        }
        
        .input-group {
            margin-bottom: 1.5rem;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .input-group input, .input-group select, .input-group textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .input-group input:focus, .input-group select:focus, .input-group textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .input-row {
            display: flex;
            gap: 1rem;
        }
        
        .input-row .input-group {
            flex: 1;
        }
        
        .data-input {
            margin-bottom: 1.5rem;
        }
        
        .data-input textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            min-height: 100px;
            resize: vertical;
        }
        
        .data-input .help-text {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-top: 0.5rem;
        }
        
        .calculate-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
            display: block;
            width: 100%;
        }
        
        .calculate-btn:hover {
            background-color: #2980b9;
        }
        
        .result-box {
            margin-top: 2rem;
            padding: 1.5rem;
            background-color: #f8f9fa;
            border-radius: 5px;
            border-left: 4px solid var(--secondary-color);
            display: none;
        }
        
        .result-box h3 {
            margin-bottom: 1rem;
            color: var(--primary-color);
        }
        
        .result-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--secondary-color);
        }
        
        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }
        
        .result-card {
            padding: 1rem;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .result-card h4 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        .interpretation {
            margin-top: 1.5rem;
            padding: 1rem;
            background-color: #e8f4fc;
            border-radius: 5px;
            border-left: 4px solid var(--secondary-color);
        }
        
        .examples-section {
            margin-top: 3rem;
        }
        
        .example {
            margin-bottom: 1.5rem;
            padding: 1rem;
            background-color: #f8f9fa;
            border-radius: 5px;
        }
        
        .example h4 {
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        
        table, th, td {
            border: 1px solid #ddd;
        }
        
        th, td {
            padding: 0.75rem;
            text-align: left;
        }
        
        th {
            background-color: #f2f2f2;
        }
        
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 2rem 0;
            text-align: center;
            margin-top: 2rem;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            margin-bottom: 1.5rem;
        }
        
        .footer-links a {
            color: white;
            margin: 0 1rem;
            text-decoration: none;
        }
        
        .footer-links a:hover {
            text-decoration: underline;
        }
        
        .copyright {
            color: var(--text-light);
            font-size: 0.9rem;
        }
        
        /* LP-specific styles */
        .lp-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .lp-control {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .lp-control label {
            font-weight: 500;
        }
        
        .lp-control input, .lp-control select {
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .objective-row, .constraint-row {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 0.5rem;
            margin: 0.5rem 0;
        }
        
        .coeff {
            width: 70px;
            padding: 0.6rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-align: center;
        }
        
        .ineq-select {
            padding: 0.6rem;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .lp-button {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .lp-button:hover {
            background-color: #2980b9;
        }
        
        .lp-button.secondary {
            background-color: #6c757d;
        }
        
        .lp-button.secondary:hover {
            background-color: #5a6268;
        }
        
        .iterations {
            margin-top: 1.5rem;
        }
        
        .iteration-step {
            background-color: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 1.5rem;
        }
        
        .iteration-step h4 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--light-color);
        }
        
        .op-log {
            background-color: #f8f9fa;
            padding: 1rem;
            border-radius: 4px;
            margin: 0.5rem 0;
            font-family: monospace;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            nav ul {
                margin-top: 1rem;
                justify-content: center;
            }
            
            nav ul li {
                margin: 0 0.75rem;
            }
            
            .input-row {
                flex-direction: column;
                gap: 0;
            }
            
            .result-grid {
                grid-template-columns: 1fr;
            }
            
            .objective-row, .constraint-row {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .coeff, .ineq-select {
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <!-- xxxx navigation start xxxxx -->
    <button class="sidebar-toggle">☰</button>
    <div class="overlay"></div>
    <aside class="sidebar">
        <div class="sidebar-header">
            <h3>Navigation</h3>
            <button class="sidebar-close">×</button>
        </div>
        
        <div class="sidebar-category">
            <div class="sidebar-category-header production">
                <span>Production Planning</span>
                <span>+</span>
            </div>
            <div class="sidebar-category-content">
                <a href="flowshopsequencing.html" class="sidebar-link">Flow Shop Sequencing</a>
                <a href="jobshopsequencing.html" class="sidebar-link">Job Shop Sequencing</a>
                <a href="takttime.html" class="sidebar-link">Takt Time</a>
                <a href="synchronousservicing.html" class="sidebar-link">Synchronous Servicing</a>
            </div>
        </div>
        
        <div class="sidebar-category">
            <div class="sidebar-category-header quality">
                <span>Quality Control</span>
                <span>+</span>
            </div>
            <div class="sidebar-category-content">
                <a href="acceptancesamplingplan.html" class="sidebar-link">Acceptance Sampling Plan</a>
                <a href="controlcharts.html" class="sidebar-link">Control Charts</a>
                <a href="gagerr.html" class="sidebar-link">Gage R&R</a>
                <a href="processcapability.html" class="sidebar-link">Process Capability</a>
                <a href="sixsigmadpmo.html" class="sidebar-link">Six Sigma DPMO</a>
                <a href="oee.html" class="sidebar-link">OEE Calculator</a>
            </div>
        </div>
        
        <div class="sidebar-category">
            <div class="sidebar-category-header statistics">
                <span>Statistics & DOE</span>
                <span>+</span>
            </div>
            <div class="sidebar-category-content">
                <a href="anova.html" class="sidebar-link">ANOVA</a>
                <a href="chisquaretest.html" class="sidebar-link">Chi-Square Test</a>
                <a href="correlation.html" class="sidebar-link">Correlation Analysis</a>
                <a href="factorialdesign.html" class="sidebar-link">Factorial Design</a>
                <a href="goodnessoffit.html" class="sidebar-link">Goodness of Fit</a>
                <a href="regression.html" class="sidebar-link">Regression</a>
                <a href="samplesize.html" class="sidebar-link">Sample Size</a>
                <a href="taguchi.html" class="sidebar-link">Taguchi</a>
                <a href="ttest.html" class="sidebar-link">T-Test</a>
                <a href="ztest.html" class="sidebar-link">Z-Test</a>
            </div>
        </div>
        
        <div class="sidebar-category">
            <div class="sidebar-category-header inventory">
                <span>Inventory Management</span>
                <span>+</span>
            </div>
            <div class="sidebar-category-content">
                <a href="eoq.html" class="sidebar-link">Economic Order Quantity</a>
                <a href="rop.html" class="sidebar-link">Reorder Point</a>
                <a href="kanban.html" class="sidebar-link">Kanban Calculator</a>
                <a href="newsvendor.html" class="sidebar-link">Newsvendor Model</a>
            </div>
        </div>
        
        <div class="sidebar-category">
            <div class="sidebar-category-header workstudy">
                <span>Work Study</span>
                <span>+</span>
            </div>
            <div class="sidebar-category-content">
                <a href="timestudy.html" class="sidebar-link">Time Study</a>
                <a href="predeterminedmotiontimesystems.html" class="sidebar-link">Predetermined Motion Time Systems</a>
                <a href="learningcurve.html" class="sidebar-link">Learning Curve</a>
                <a href="littleslaw.html" class="sidebar-link">Little's Law</a>
                <a href="worksampling.html" class="sidebar-link">Work Sampling</a>
            </div>
        </div>
        
        <div class="sidebar-category">
            <div class="sidebar-category-header ergonomics">
                <span>Ergonomics</span>
                <span>+</span>
            </div>
            <div class="sidebar-category-content">
                <a href="biomechanics.html" class="sidebar-link">Biomechanics</a>
                <a href="noisedose.html" class="sidebar-link">Noise Dose</a>
                <a href="posture.html" class="sidebar-link">Posture Analysis</a>
                <a href="workphysiology.html" class="sidebar-link">Work Physiology</a>
                <a href="workrest.html" class="sidebar-link">Work-Rest Cycles</a>
            </div>
        </div>
        
        <div class="sidebar-category">
            <div class="sidebar-category-header operations">
                <span>Operations Research</span>
                <span>+</span>
            </div>
            <div class="sidebar-category-content">
                <a href="linearprogramming.html" class="sidebar-link">Linear Programming</a>
                <a href="queueing.html" class="sidebar-link">Queueing Analysis</a>
                <a href="decisionanalysis.html" class="sidebar-link">Decision Analysis</a>
                <a href="gametheory.html" class="sidebar-link">Game Theory</a>
                <a href="markov.html" class="sidebar-link">Markov Analysis</a>
            </div>
        </div>
        
        <div class="sidebar-category">
            <div class="sidebar-category-header economy">
                <span>Engineering Economy</span>
                <span>+</span>
            </div>
            <div class="sidebar-category-content">
                <a href="breakeven.html" class="sidebar-link">Break-even Analysis</a>
                <a href="costanalysis.html" class="sidebar-link">Cost Analysis</a>
                <a href="depreciation.html" class="sidebar-link">Depreciation</a>
                <a href="timevalueofmoney.html" class="sidebar-link">Time Value of Money</a>
            </div>
        </div>
        
        <div class="sidebar-category">
            <div class="sidebar-category-header facilities">
                <span>Facilities Planning</span>
                <span>+</span>
            </div>
            <div class="sidebar-category-content">
                <a href="facilitieslocation.html" class="sidebar-link">Facilities Location</a>
            </div>
        </div>
        
        <div class="sidebar-category">
            <div class="sidebar-category-header reliability">
                <span>Reliability & Maintenance</span>
                <span>+</span>
            </div>
            <div class="sidebar-category-content">
                <a href="reliabilityanalysis.html" class="sidebar-link">Reliability Analysis</a>
            </div>
        </div>
    </aside>
    <!-- xxxx navigation end xxxxx -->
    
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">Industrial Engineering <span>Calculators</span></div>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="terms.html">Terms</a></li>
                    <li><a href="privacy.html">Privacy Policy</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <section class="page-hero">
        <div class="container">
            <h1>Linear Programming Calculator</h1>
            <p>Solve optimization problems using the Simplex method with step-by-step solutions</p>
        </div>
    </section>
    
    <main class="container">
        <section class="content-section">
            <div class="calculator-intro">
                <h2>Linear Programming</h2>
                <p>Linear programming is a mathematical method to achieve the best outcome (such as maximum profit or lowest cost) in a mathematical model whose requirements are represented by linear relationships.</p>
                <div class="formula-box">
                    Maximize: Z = c₁x₁ + c₂x₂ + ... + cₙxₙ<br>
                    Subject to: a₁₁x₁ + a₁₂x₂ + ... + a₁ₙxₙ ≤ b₁<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a₂₁x₁ + a₂₂x₂ + ... + a₂ₙxₙ ≤ b₂<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x₁, x₂, ..., xₙ ≥ 0
                </div>
            </div>
            
            <div class="lp-controls">
                <div class="lp-control">
                    <label for="problem-type">Problem Type</label>
                    <select id="problem-type">
                        <option value="maximize" selected>Maximize</option>
                        <option value="minimize">Minimize</option>
                    </select>
                </div>
                
                <div class="lp-control">
                    <label for="variable-count">Number of Variables</label>
                    <input id="variable-count" type="number" min="2" max="10" value="2"/>
                </div>
                
                <div class="lp-control">
                    <label for="constraint-count">Number of Constraints</label>
                    <input id="constraint-count" type="number" min="1" max="15" value="2"/>
                </div>
                
                <div class="lp-control" style="align-self: end;">
                    <button id="generate" class="lp-button">Generate Form</button>
                </div>
            </div>
            
            <div>
                <h3>Objective Function</h3>
                <div id="objective-function" class="objective-row"></div>
            </div>
            
            <div style="margin-top: 1.5rem;">
                <h3>Constraints</h3>
                <div id="constraints-list"></div>
            </div>
            
            <div style="margin-top: 1.5rem; display: flex; gap: 1rem;">
                <button id="solve" class="lp-button">Solve Problem</button>
                <button id="load-sample" class="lp-button secondary">Load Sample Problem</button>
                <button id="clear-iterations" class="lp-button secondary">Clear Steps</button>
            </div>
            
            <div id="error-box" style="display:none; margin-top:1rem; padding:1rem; background-color:#ffe6e6; color:var(--accent-color); border-radius:4px;"></div>
            
            <div class="result-box" id="result-card">
                <h3>Solution</h3>
                <div id="solution-status"></div>
                <div id="objective-value" class="result-value"></div>
                <div id="variable-values" style="margin-top: 1rem;"></div>
                
                <div class="iterations" id="iterations-container"></div>
            </div>
            
            <div class="examples-section">
                <h3>Linear Programming Examples</h3>
                
                <div class="example">
                    <h4>Production Planning Example</h4>
                    <p>A company produces two products (A and B) with the following constraints:</p>
                    <p>Maximize: Z = 3x₁ + 5x₂</p>
                    <p>Subject to:</p>
                    <p>2x₁ + 3x₂ ≤ 12 (Machine hours constraint)</p>
                    <p>x₁ + x₂ ≤ 5 (Labor hours constraint)</p>
                    <p>x₁, x₂ ≥ 0</p>
                </div>
                
                <div class="example">
                    <h4>Diet Problem Example</h4>
                    <p>Minimize the cost of a diet while meeting nutritional requirements:</p>
                    <p>Minimize: Z = 0.6x₁ + x₂</p>
                    <p>Subject to:</p>
                    <p>10x₁ + 4x₂ ≥ 20 (Protein requirement)</p>
                    <p>5x₁ + 5x₂ ≥ 20 (Carbohydrate requirement)</p>
                    <p>2x₁ + 6x₂ ≥ 12 (Fat requirement)</p>
                    <p>x₁, x₂ ≥ 0</p>
                </div>
            </div>
        </section>
    </main>
    
    <footer>
        <div class="footer-links">
                <a href="index.html">Home</a>
                <a href="about.html">About</a>
                <a href="terms.html">Terms of Service</a>
                <a href="privacy.html">Privacy Policy</a>
                <a href="contact.html">Contact Us</a>
                <a href="sitemap.html">Sitemap</a>
            </div>
            <p class="copyright">&copy; 2025 Industrial Engineering Calculators. All rights reserved.</p>
        </div>
    </footer>

    <!-- xxxx navigation start xxxxx -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const sidebar = document.querySelector('.sidebar');
            const sidebarToggle = document.querySelector('.sidebar-toggle');
            const sidebarClose = document.querySelector('.sidebar-close');
            const overlay = document.querySelector('.overlay');
            const body = document.body;
            
            // Toggle sidebar
            function toggleSidebar() {
                sidebar.classList.toggle('open');
                overlay.classList.toggle('active');
                body.classList.toggle('sidebar-open');
            }
            
            // Toggle category expansion
            const categoryHeaders = document.querySelectorAll('.sidebar-category-header');
            categoryHeaders.forEach(header => {
                header.addEventListener('click', function() {
                    const category = this.parentElement;
                    category.classList.toggle('open');
                    
                    // Update the expand/collapse icon
                    const icon = this.querySelector('span:last-child');
                    icon.textContent = category.classList.contains('open') ? '−' : '+';
                });
            });
            
            // Event listeners
            sidebarToggle.addEventListener('click', toggleSidebar);
            sidebarClose.addEventListener('click', toggleSidebar);
            overlay.addEventListener('click', toggleSidebar);
            
            // Close sidebar when clicking outside on mobile
            document.addEventListener('click', function(event) {
                if (window.innerWidth <= 768 && 
                    body.classList.contains('sidebar-open') && 
                    !sidebar.contains(event.target) && 
                    event.target !== sidebarToggle) {
                    toggleSidebar();
                }
            });
            
            // Close sidebar when pressing Escape key
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape' && body.classList.contains('sidebar-open')) {
                    toggleSidebar();
                }
            });
        });
    </script>
    <!-- xxxx navigation end xxxxx -->

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // DOM elements
            const variableCountInput = document.getElementById('variable-count');
            const constraintCountInput = document.getElementById('constraint-count');
            const generateButton = document.getElementById('generate');
            const objectiveContainer = document.getElementById('objective-function');
            const constraintsList = document.getElementById('constraints-list');
            const solveBtn = document.getElementById('solve');
            const resultCard = document.getElementById('result-card');
            const solutionStatus = document.getElementById('solution-status');
            const objectiveValueEl = document.getElementById('objective-value');
            const variableValuesEl = document.getElementById('variable-values');
            const iterationsContainer = document.getElementById('iterations-container');
            const errorBox = document.getElementById('error-box');
            const loadSampleBtn = document.getElementById('load-sample');
            const clearIterationsBtn = document.getElementById('clear-iterations');
            
            const EPS = 1e-9;

            // Helper functions
            function setInputDecimals(elem) { elem.setAttribute('step', 'any'); }
            function showError(msg) { errorBox.style.display = 'block'; errorBox.textContent = msg; }
            function hideError() { errorBox.style.display = 'none'; errorBox.textContent = ''; }

            // Generate problem UI
            function generateObjectiveFunction(n, initialCoeffs) {
                objectiveContainer.innerHTML = '';
                const problemType = document.getElementById('problem-type').value;
                const label = document.createElement('span');
                label.className = 'muted';
                label.textContent = problemType === 'maximize' ? 'Maximize: Z = ' : 'Minimize: Z = ';
                objectiveContainer.appendChild(label);

                for (let i = 1; i <= n; i++) {
                    const inp = document.createElement('input');
                    inp.type = 'number';
                    inp.className = 'coeff';
                    inp.dataset.variable = 'x' + i;
                    inp.value = (initialCoeffs && initialCoeffs[i - 1] !== undefined) ? initialCoeffs[i - 1] : (i === 1 ? 3 : (i === 2 ? 2 : 1));
                    setInputDecimals(inp);
                    objectiveContainer.appendChild(inp);

                    const lab = document.createElement('span');
                    lab.className = 'muted';
                    lab.textContent = ' x' + i + ' ';
                    objectiveContainer.appendChild(lab);

                    if (i < n) {
                        const plus = document.createElement('span');
                        plus.textContent = '+';
                        plus.style.margin = '0 6px';
                        objectiveContainer.appendChild(plus);
                    }
                }
            }

            function generateConstraints(nVars, nCons, initial) {
                constraintsList.innerHTML = '';
                for (let i = 1; i <= nCons; i++) {
                    const row = document.createElement('div');
                    row.className = 'constraint-row';
                    for (let j = 1; j <= nVars; j++) {
                        const c = document.createElement('input');
                        c.type = 'number';
                        c.className = 'coeff';
                        c.dataset.variable = 'x' + j;
                        // default or from initial
                        if (initial && initial[i - 1] && initial[i - 1].coeffs && initial[i - 1].coeffs[j - 1] !== undefined) {
                            c.value = initial[i - 1].coeffs[j - 1];
                        } else {
                            c.value = (j === 1 ? 2 : (j === 2 ? 1 : 1));
                        }
                        setInputDecimals(c);
                        row.appendChild(c);

                        const lab = document.createElement('span');
                        lab.className = 'muted';
                        lab.textContent = ' x' + j + ' ';
                        row.appendChild(lab);

                        if (j < nVars) {
                            const plus = document.createElement('span');
                            plus.textContent = '+';
                            plus.style.margin = '0 6px';
                            row.appendChild(plus);
                        }
                    }

                    const sel = document.createElement('select');
                    sel.className = 'ineq-select';
                    sel.innerHTML = `<option value="<=">≤</option><option value=">=">≥</option><option value="=">=</option>`;
                    row.appendChild(sel);

                    const rhs = document.createElement('input');
                    rhs.type = 'number';
                    rhs.className = 'coeff';
                    rhs.dataset.constraint = 'c' + i;
                    rhs.value = (initial && initial[i - 1] && initial[i - 1].rhs !== undefined) ? initial[i - 1].rhs : (i === 1 ? 100 : (i === 2 ? 80 : 40));
                    setInputDecimals(rhs);
                    row.appendChild(rhs);

                    constraintsList.appendChild(row);
                }
            }

            function generateProblemForm() {
                const v = parseInt(variableCountInput.value);
                const c = parseInt(constraintCountInput.value);
                if (isNaN(v) || v < 2) {
                    showError('Enter >=2 decision variables');
                    return;
                }
                if (isNaN(c) || c < 1) {
                    showError('Enter >=1 constraint');
                    return;
                }
                hideError();
                generateObjectiveFunction(v);
                generateConstraints(v, c);
            }

            // Hook generate
            generateButton.addEventListener('click', generateProblemForm);

            // Load sample problem
            loadSampleBtn.addEventListener('click', () => {
                variableCountInput.value = 2;
                constraintCountInput.value = 2;
                generateProblemForm();
                // override values for sample: Max 3x1 + 5x2; cons: [2,3]<=12 and [1,1]<=5
                // Wait a tick for DOM generation
                setTimeout(() => {
                    const objInputs = objectiveContainer.querySelectorAll('.coeff');
                    if (objInputs.length >= 2) {
                        objInputs[0].value = 3;
                        objInputs[1].value = 5;
                    }
                    const rows = constraintsList.querySelectorAll('.constraint-row');
                    if (rows.length >= 2) {
                        const r1 = rows[0].querySelectorAll('input.coeff'); // includes coefficient inputs and rhs as last
                        r1[0].value = 2;
                        r1[1].value = 3;
                        r1[r1.length - 1].value = 12;
                        const r2 = rows[1].querySelectorAll('input.coeff');
                        r2[0].value = 1;
                        r2[1].value = 1;
                        r2[r2.length - 1].value = 5;
                        // set inequalities to <=
                        rows[0].querySelector('select').value = '<=';
                        rows[1].querySelector('select').value = '<=';
                    }
                }, 10);
            });

            // ------- SIMPLEX IMPLEMENTATION (with detailed step recording) -------

            function readProblemFromUI() {
                const problemType = document.getElementById('problem-type').value;
                const objInputs = objectiveContainer.querySelectorAll('.coeff');
                const objectiveCoefficients = Array.from(objInputs).map(i => parseFloat(i.value));
                for (let i = 0; i < objectiveCoefficients.length; i++) {
                    if (isNaN(objectiveCoefficients[i])) throw new Error('Invalid objective coefficient for x' + (i + 1));
                }

                const constraints = [];
                const rows = constraintsList.querySelectorAll('.constraint-row');
                rows.forEach((row, idx) => {
                    const coeffs = Array.from(row.querySelectorAll('input.coeff')).slice(0, -1).map(x => parseFloat(x.value));
                    const rhs = parseFloat(row.querySelectorAll('input.coeff')[row.querySelectorAll('input.coeff').length - 1].value);
                    const ineq = row.querySelector('select').value;
                    if (coeffs.some(c => isNaN(c))) throw new Error('Invalid coefficient in constraint ' + (idx + 1));
                    if (isNaN(rhs)) throw new Error('Invalid RHS in constraint ' + (idx + 1));
                    constraints.push({
                        coefficients: coeffs,
                        inequality: ineq,
                        rhs: rhs
                    });
                });

                return {
                    objectiveCoefficients,
                    constraints,
                    isMaximization: problemType === 'maximize'
                };
            }

            // Standardize (Big-M for >= or =)
            function standardizeProblem(objectiveCoefficients, constraints, isMaximization) {
                const numDecisionVars = objectiveCoefficients.length;
                const numConstraints = constraints.length;

                const c = isMaximization ? objectiveCoefficients.slice() : objectiveCoefficients.map(x => -x);

                let numSlack = 0,
                    numSurplus = 0,
                    numArtificial = 0;
                for (let i = 0; i < numConstraints; i++) {
                    const ineq = constraints[i].inequality;
                    if (ineq === '<=') numSlack++;
                    else if (ineq === '>=') {
                        numSurplus++;
                        numArtificial++;
                    } else if (ineq === '=') numArtificial++;
                }

                const totalVars = numDecisionVars + numSlack + numSurplus + numArtificial;
                const A = [];
                const b = [];
                const basis = [];
                const artificialVars = [];
                let slackCount = 0,
                    surplusCount = 0,
                    artificialCount = 0;
                for (let i = 0; i < numConstraints; i++) {
                    let {
                        coefficients,
                        rhs,
                        inequality
                    } = constraints[i];
                    // flip negative rhs
                    if (rhs < 0) {
                        coefficients = coefficients.map(x => -x);
                        rhs = -rhs;
                        inequality = inequality === '<=' ? '>=' : (inequality === '>=' ? '<=' : '=');
                    }

                    const row = new Array(totalVars).fill(0);
                    for (let j = 0; j < numDecisionVars; j++) row[j] = coefficients[j];

                    if (inequality === '<=') {
                        row[numDecisionVars + slackCount] = 1;
                        basis.push(numDecisionVars + slackCount);
                        slackCount++;
                    } else if (inequality === '>=') {
                        row[numDecisionVars + numSlack + surplusCount] = -1;
                        row[numDecisionVars + numSlack + numSurplus + artificialCount] = 1;
                        basis.push(numDecisionVars + numSlack + numSurplus + artificialCount);
                        artificialVars.push(numDecisionVars + numSlack + numSurplus + artificialCount);
                        surplusCount++;
                        artificialCount++;
                    } else { // =
                        row[numDecisionVars + numSlack + numSurplus + artificialCount] = 1;
                        basis.push(numDecisionVars + numSlack + numSurplus + artificialCount);
                        artificialVars.push(numDecisionVars + numSlack + numSurplus + artificialCount);
                        artificialCount++;
                    }
                    A.push(row);
                    b.push(rhs);
                }

                const extendedC = new Array(totalVars).fill(0);
                for (let i = 0; i < numDecisionVars; i++) extendedC[i] = c[i];
                const M = 1e6;
                for (let i = 0; i < artificialVars.length; i++) extendedC[artificialVars[i]] = -M;

                return {
                    c: extendedC,
                    A,
                    b,
                    basis,
                    artificialVars,
                    numDecisionVars,
                    numSlack,
                    numSurplus,
                    numArtificial: artificialCount,
                    totalVars
                };
            }

            // Build initial tableau with correct reduced costs
            function createInitialTableau(standardized) {
                const numVars = standardized.c.length;
                const numCons = standardized.b.length;
                const tableau = [];
                for (let i = 0; i < numCons; i++) {
                    const row = [...standardized.A[i]];
                    row.push(standardized.b[i]);
                    tableau.push(row);
                }

                const c = standardized.c;
                const cB = standardized.basis.map(idx => (idx !== undefined ? (c[idx] || 0) : 0));
                const objRow = new Array(numVars + 1).fill(0);
                for (let j = 0; j < numVars; j++) {
                    let cbA = 0;
                    for (let k = 0; k < numCons; k++) cbA += cB[k] * standardized.A[k][j];
                    const rc = c[j] - cbA;
                    objRow[j] = -rc; // bottom stores -reduced costs
                }
                let objVal = 0;
                for (let k = 0; k < numCons; k++) objVal += cB[k] * standardized.b[k];
                objRow[numVars] = objVal;
                tableau.push(objRow);
                return tableau;
            }

            function cloneTableau(t) {
                return t.map(r => [...r]);
            }

            function recomputeObjectiveRow(tableau, standardized) {
                const numRows = tableau.length - 1;
                const numCols = tableau[0].length;
                const numVars = numCols - 1;
                const c = standardized.c;
                const cB = standardized.basis.map(idx => (idx !== undefined ? (c[idx] || 0) : 0));
                for (let j = 0; j < numVars; j++) {
                    let cbTimesA = 0;
                    for (let k = 0; k < numRows; k++) cbTimesA += cB[k] * tableau[k][j];
                    const rc = c[j] - cbTimesA;
                    tableau[numRows][j] = -rc;
                }
                let objVal = 0;
                for (let k = 0; k < numRows; k++) objVal += cB[k] * tableau[k][numVars];
                tableau[numRows][numVars] = objVal;
            }

            function findPivotColumn(tableau) {
                const last = tableau.length - 1;
                const numCols = tableau[0].length - 1;
                let pivotCol = -1;
                let bestVal = 0 - EPS;
                for (let j = 0; j < numCols; j++) {
                    const v = tableau[last][j];
                    if (v < bestVal) {
                        bestVal = v;
                        pivotCol = j;
                    }
                }
                return pivotCol;
            }

            function findPivotRow(tableau, pivotCol) {
                const numRows = tableau.length - 1;
                const rhs = tableau[0].length - 1;
                let pivotRow = -1;
                let minRatio = Infinity;
                for (let i = 0; i < numRows; i++) {
                    const a = tableau[i][pivotCol];
                    if (a > EPS) {
                        const ratio = tableau[i][rhs] / a;
                        if (ratio >= -EPS && ratio < minRatio - EPS) {
                            minRatio = ratio;
                            pivotRow = i;
                        }
                    }
                }
                return pivotRow;
            }

            // pivot performs arithmetic
            function pivotPerform(tableau, pivotRow, pivotCol) {
                const pivotValue = tableau[pivotRow][pivotCol];
                if (Math.abs(pivotValue) < EPS) throw new Error('Pivot too small');
                const numCols = tableau[0].length;
                // normalize
                for (let j = 0; j < numCols; j++) tableau[pivotRow][j] /= pivotValue;
                // eliminate
                for (let i = 0; i < tableau.length; i++) {
                    if (i === pivotRow) continue;
                    const factor = tableau[i][pivotCol];
                    if (Math.abs(factor) < EPS) continue;
                    for (let j = 0; j < numCols; j++) tableau[i][j] -= factor * tableau[pivotRow][j];
                }
            }

            // high-level solver that records detailed operations
            function solveSimplexDetailed(objectiveCoefficients, constraints, isMaximization) {
                const standardized = standardizeProblem(objectiveCoefficients, constraints, isMaximization);
                let tableau = createInitialTableau(standardized);

                const steps = []; // array of step groups
                // initial snapshot
                steps.push({
                    type: 'initial',
                    tableau: cloneTableau(tableau),
                    basis: standardized.basis.slice(),
                    msg: 'Initial tableau'
                });

                const maxIter = 200;
                let iter = 0;
                while (iter < maxIter) {
                    const pivotCol = findPivotColumn(tableau);
                    if (pivotCol === -1) break; // optimal

                    const pivotRow = findPivotRow(tableau, pivotCol);
                    if (pivotRow === -1) {
                        return {
                            status: 'unbounded',
                            message: 'Unbounded',
                            steps,
                            standardized
                        };
                    }

                    // record before pivot (explicit)
                    const before = cloneTableau(tableau);
                    // compute normalized pivot row values (for log)
                    const pv = before[pivotRow][pivotCol];
                    if (Math.abs(pv) < EPS) throw new Error('Pivot is numerically zero');

                    const normalizedPivot = before[pivotRow].map(v => v / pv);

                    // compute elimination step results (without mutating the tableau) to present
                    const eliminations = [];
                    for (let i = 0; i < before.length; i++) {
                        if (i === pivotRow) continue;
                        const factor = before[i][pivotCol];
                        if (Math.abs(factor) < EPS) continue;
                        const newRow = before[i].map((val, j) => val - factor * normalizedPivot[j]);
                        eliminations.push({
                            rowIndex: i,
                            factor,
                            oldRow: before[i].slice(),
                            newRow
                        });
                    }

                    // Now perform actual pivot on tableau (same arithmetic)
                    pivotPerform(tableau, pivotRow, pivotCol);

                    // Update basis
                    standardized.basis[pivotRow] = pivotCol;

                    // Recompute objective row for exactness
                    recomputeObjectiveRow(tableau, standardized);

                    // record after pivot & operations
                    steps.push({
                        type: 'pivot',
                        pivotRow,
                        pivotCol,
                        before,
                        normalizedPivot,
                        eliminations,
                        after: cloneTableau(tableau),
                        basis: standardized.basis.slice(),
                        msg: `Iteration ${iter+1}: enter x${pivotCol+1}, leave row ${pivotRow+1}`
                    });

                    iter++;
                }

                if (iter >= maxIter) return {
                    status: 'error',
                    message: 'Max iterations exceeded',
                    steps,
                    standardized
                };

                // infeasibility check (artificial vars in basis with positive RHS)
                const infeasible = checkInfeasibility(tableau, standardized);
                if (infeasible) return {
                    status: 'infeasible',
                    message: 'Infeasible (artificials)',
                    steps,
                    standardized
                };

                // extract solution
                const sol = extractSolution(tableau, standardized);
                return {
                    status: 'optimal',
                    solution: sol,
                    steps,
                    standardized
                };
            }

            function checkInfeasibility(tableau, standardized) {
                const rhs = tableau[0].length - 1;
                for (let ai = 0; ai < standardized.artificialVars.length; ai++) {
                    const artIdx = standardized.artificialVars[ai];
                    for (let r = 0; r < standardized.basis.length; r++) {
                        if (standardized.basis[r] === artIdx) {
                            if (Math.abs(tableau[r][rhs]) > 1e-6) return true;
                        }
                    }
                }
                return false;
            }

            function extractSolution(tableau, standardized) {
                const nd = standardized.numDecisionVars;
                const rhs = tableau[0].length - 1;
                const solution = new Array(nd).fill(0);
                for (let j = 0; j < nd; j++) {
                    for (let i = 0; i < standardized.basis.length; i++) {
                        if (standardized.basis[i] === j) {
                            solution[j] = tableau[i][rhs];
                            break;
                        }
                    }
                }
                const objVal = tableau[tableau.length - 1][rhs];
                return {
                    variables: solution,
                    objectiveValue: objVal
                };
            }

            // ---------- Display functions ----------
            function renderMatrixTable(tableau, basis, standardized) {
                // tableau: array of rows (each row length numVars+1)
                const numCols = tableau[0].length;
                const numVars = numCols - 1;
                const headerCells = [];
                for (let j = 0; j < numVars; j++) headerCells.push('x' + (j + 1));
                headerCells.push('RHS');

                const tbl = document.createElement('table');
                const thead = document.createElement('thead'),
                    thr = document.createElement('tr');
                thr.appendChild(document.createElement('th')); // corner
                headerCells.forEach(h => {
                    const th = document.createElement('th');
                    th.textContent = h;
                    thr.appendChild(th);
                });
                thead.appendChild(thr);
                tbl.appendChild(thead);

                const tbody = document.createElement('tbody');
                for (let i = 0; i < tableau.length; i++) {
                    const tr = document.createElement('tr');
                    const rowLabel = document.createElement('td');
                    if (i < tableau.length - 1) {
                        const basisVar = (basis && basis[i] !== undefined) ? 'x' + (basis[i] + 1) : ('r' + (i + 1));
                        rowLabel.textContent = basisVar;
                    } else rowLabel.textContent = 'Obj';
                    tr.appendChild(rowLabel);
                    for (let j = 0; j < tableau[i].length; j++) {
                        const td = document.createElement('td');
                        const v = tableau[i][j];
                        td.textContent = (Math.abs(v) < 1e-10) ? '0.000000' : Number(v).toFixed(6);
                        tr.appendChild(td);
                    }
                    tbody.appendChild(tr);
                }
                tbl.appendChild(tbody);
                return tbl;
            }

            function renderSteps(steps, standardized) {
                iterationsContainer.innerHTML = '';
                steps.forEach((s, idx) => {
                    const block = document.createElement('div');
                    block.className = 'iteration-step';
                    if (s.type === 'initial') {
                        const h = document.createElement('h4');
                        h.textContent = s.msg;
                        block.appendChild(h);
                        block.appendChild(renderMatrixTable(s.tableau, s.basis, standardized));
                    } else if (s.type === 'pivot') {
                        const h = document.createElement('h4');
                        h.textContent = s.msg;
                        block.appendChild(h);

                        const beforeTitle = document.createElement('div');
                        beforeTitle.className = 'muted';
                        beforeTitle.textContent = 'Before pivot:';
                        block.appendChild(beforeTitle);
                        block.appendChild(renderMatrixTable(s.before, s.beforeBasis || s.basis, standardized));

                        // normalized pivot row
                        const pivotInfo = document.createElement('div');
                        pivotInfo.className = 'op-log';
                        pivotInfo.innerHTML = `<strong>Normalized pivot row (row ${s.pivotRow+1} / column x${s.pivotCol+1}):</strong><br>`;
                        pivotInfo.innerHTML += s.normalizedPivot.map(v => (Math.abs(v) < 1e-10 ? '0.000000' : Number(v).toFixed(6))).join('  ');
                        block.appendChild(pivotInfo);

                        // elimination steps
                        if (s.eliminations && s.eliminations.length) {
                            s.eliminations.forEach(e => {
                                const elDiv = document.createElement('div');
                                elDiv.className = 'op-log';
                                elDiv.innerHTML = `<strong>Row ${e.rowIndex+1} := Row ${e.rowIndex+1} - (${Number(e.factor).toFixed(6)}) * PivotRow</strong><br>`;
                                elDiv.innerHTML += `Old: ` + e.oldRow.map(v => (Math.abs(v) < 1e-10 ? '0.000000' : Number(v).toFixed(6))).join('  ') + '<br>';
                                elDiv.innerHTML += `New: ` + e.newRow.map(v => (Math.abs(v) < 1e-10 ? '0.000000' : Number(v).toFixed(6))).join('  ');
                                block.appendChild(elDiv);
                            });
                        }

                        const afterTitle = document.createElement('div');
                        afterTitle.className = 'muted';
                        afterTitle.textContent = 'After pivot:';
                        block.appendChild(afterTitle);
                        block.appendChild(renderMatrixTable(s.after, s.basis, standardized));
                    }
                    iterationsContainer.appendChild(block);
                });
            }

            // Solve handler
            solveBtn.addEventListener('click', () => {
                hideError();
                resultCard.style.display = 'none';
                iterationsContainer.innerHTML = '';
                try {
                    const {
                        objectiveCoefficients,
                        constraints,
                        isMaximization
                    } = readProblemFromUI();
                    const res = solveSimplexDetailed(objectiveCoefficients, constraints, isMaximization);

                    // display
                    if (res.status === 'optimal') {
                        resultCard.style.display = 'block';
                        solutionStatus.textContent = 'Optimal Solution Found';
                        const objSign = isMaximization ? 1 : -1;
                        objectiveValueEl.textContent = 'Objective Value: Z = ' + (res.solution.objectiveValue * objSign).toFixed(6);
                        variableValuesEl.innerHTML = '';
                        res.solution.variables.forEach((v, i) => {
                            const d = document.createElement('div');
                            d.textContent = 'x' + (i + 1) + ': ' + Number(v).toFixed(6);
                            variableValuesEl.appendChild(d);
                        });
                        renderSteps(res.steps, res.standardized);
                    } else {
                        resultCard.style.display = 'block';
                        solutionStatus.textContent = res.status.toUpperCase();
                        objectiveValueEl.textContent = res.message || '';
                        variableValuesEl.innerHTML = '';
                        renderSteps(res.steps, res.standardized);
                    }
                } catch (e) {
                    showError(e.message || String(e));
                }
            });

            clearIterationsBtn.addEventListener('click', () => {
                iterationsContainer.innerHTML = '';
                resultCard.style.display = 'none';
            });

            // init
            generateProblemForm();
        });
    </script>
</body>
</html>
