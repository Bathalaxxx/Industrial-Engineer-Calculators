<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EOQ Calculator - IE Toolkit</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-100">
    <!-- Sidebar (loaded dynamically) -->
    <div id="sidebar-container"></div>
    <!-- Main Content -->
    <div class="flex-1 p-6">
        <div class="hamburger-menu">☰</div>
        <h1 class="text-3xl font-bold mb-4">Economic Order Quantity (EOQ) Calculator</h1>
        <div class="bg-white p-6 rounded-lg shadow-md mb-6">
            <h2 class="text-xl font-semibold mb-2">About EOQ Calculator</h2>
            <p class="mb-4">The Economic Order Quantity (EOQ) Calculator helps determine the optimal order quantity that minimizes total inventory costs, including ordering and holding costs. It supports multiple variations to suit different scenarios, such as basic EOQ, EOQ with shortages, and EOQ with quantity discounts.</p>
        </div>
        <!-- Calculator Selection -->
        <div class="mb-6">
            <label for="eoqType" class="block text-lg font-medium mb-2">Select EOQ Variation</label>
            <select id="eoqType" class="border rounded p-2 w-full max-w-xs">
                <option value="basic">Basic EOQ</option>
                <option value="shortages">EOQ with Shortages</option>
                <option value="discounts">EOQ with Quantity Discounts</option>
            </select>
        </div>
        <!-- Input Form -->
        <div id="inputForm" class="bg-white p-6 rounded-lg shadow-md mb-6">
            <!-- Form fields will be dynamically updated based on EOQ variation -->
        </div>
        <!-- Result Display -->
        <div id="result" class="bg-white p-6 rounded-lg shadow-md hidden">
            <h2 class="text-xl font-semibold mb-2">Results</h2>
            <div id="resultContent"></div>
        </div>
        <!-- Real-World Examples -->
        <div class="bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-xl font-semibold mb-2">Real-World Applications</h2>
            <ul class="list-disc ml-6">
                <li><strong>Basic EOQ:</strong> Used by a retail store to determine the optimal order size for a product with stable demand, like canned goods, to balance ordering and holding costs.</li>
                <li><strong>EOQ with Shortages:</strong> Applied in a manufacturing plant where backordering is allowed, such as for machine parts, to account for stockouts while minimizing costs.</li>
                <li><strong>EOQ with Quantity Discounts:</strong> Utilized by a wholesaler purchasing bulk items, like electronics, where suppliers offer discounts for larger order quantities.</li>
            </ul>
        </div>
    </div>
    <script src="common.js"></script>
    <script>
        // Load sidebar dynamically
        fetch('sidebar.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('sidebar-container').innerHTML = data;
            })
            .catch(error => console.error('Error loading sidebar:', error));

        // Form templates for different EOQ variations
        const formTemplates = {
            basic: `
                <h3 class="text-lg font-medium mb-4">Basic EOQ Inputs</h3>
                <div class="grid grid-cols-1 gap-4">
                    <div>
                        <label class="block">Annual Demand (D):</label>
                        <input type="number" id="demand" class="border rounded p-2 w-full" placeholder="e.g., 1000 units" required>
                    </div>
                    <div>
                        <label class="block">Ordering Cost per Order (S):</label>
                        <input type="number" id="orderingCost" class="border rounded p-2 w-full" placeholder="e.g., $50" required>
                    </div>
                    <div>
                        <label class="block">Holding Cost per Unit per Year (H):</label>
                        <input type="number" id="holdingCost" class="border rounded p-2 w-full" placeholder="e.g., $2" required>
                    </div>
                    <button onclick="calculateEOQ()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Calculate</button>
                </div>
            `,
            shortages: `
                <h3 class="text-lg font-medium mb-4">EOQ with Shortages Inputs</h3>
                <div class="grid grid-cols-1 gap-4">
                    <div>
                        <label class="block">Annual Demand (D):</label>
                        <input type="number" id="demand" class="border rounded p-2 w-full" placeholder="e.g., 1000 units" required>
                    </div>
                    <div>
                        <label class="block">Ordering Cost per Order (S):</label>
                        <input type="number" id="orderingCost" class="border rounded p-2 w-full" placeholder="e.g., $50" required>
                    </div>
                    <div>
                        <label class="block">Holding Cost per Unit per Year (H):</label>
                        <input type="number" id="holdingCost" class="border rounded p-2 w-full" placeholder="e.g., $2" required>
                    </div>
                    <div>
                        <label class="block">Shortage Cost per Unit per Year (P):</label>
                        <input type="number" id="shortageCost" class="border rounded p-2 w-full" placeholder="e.g., $10" required>
                    </div>
                    <button onclick="calculateEOQ()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Calculate</button>
                </div>
            `,
            discounts: `
                <h3 class="text-lg font-medium mb-4">EOQ with Quantity Discounts Inputs</h3>
                <div class="grid grid-cols-1 gap-4">
                    <div>
                        <label class="block">Annual Demand (D):</label>
                        <input type="number" id="demand" class="border rounded p-2 w-full" placeholder="e.g., 1000 units" required>
                    </div>
                    <div>
                        <label class="block">Ordering Cost per Order (S):</label>
                        <input type="number" id="orderingCost" class="border rounded p-2 w-full" placeholder="e.g., $50" required>
                    </div>
                    <div>
                        <label class="block">Holding Cost per Unit per Year (H):</label>
                        <input type="number" id="holdingCost" class="border rounded p-2 w-full" placeholder="e.g., $2" required>
                    </div>
                    <div>
                        <label class="block">Unit Price for Q < 500:</label>
                        <input type="number" id="price1" class="border rounded p-2 w-full" placeholder="e.g., $10" required>
                    </div>
                    <div>
                        <label class="block">Unit Price for Q ≥ 500:</label>
                        <input type="number" id="price2" class="border rounded p-2 w-full" placeholder="e.g., $9" required>
                    </div>
                    <button onclick="calculateEOQ()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Calculate</button>
                </div>
            `
        };

        // Update form based on selected EOQ variation
        document.getElementById('eoqType').addEventListener('change', function() {
            document.getElementById('inputForm').innerHTML = formTemplates[this.value];
            document.getElementById('result').classList.add('hidden');
        });

        // Initialize with basic EOQ form
        document.getElementById('inputForm').innerHTML = formTemplates.basic;

        // Calculate EOQ based on selected variation
        function calculateEOQ() {
            const eoqType = document.getElementById('eoqType').value;
            const demand = parseFloat(document.getElementById('demand').value);
            const orderingCost = parseFloat(document.getElementById('orderingCost').value);
            const holdingCost = parseFloat(document.getElementById('holdingCost').value);
            let resultText = '';

            if (isNaN(demand) || isNaN(orderingCost) || isNaN(holdingCost)) {
                resultText = '<p class="text-red-600">Please enter valid numbers for all inputs.</p>';
            } else {
                if (eoqType === 'basic') {
                    const eoq = Math.sqrt((2 * demand * orderingCost) / holdingCost);
                    const totalCost = Math.sqrt(2 * demand * orderingCost * holdingCost);
                    const orderFrequency = demand / eoq;
                    resultText = `
                        <p><strong>Optimal Order Quantity (EOQ):</strong> ${eoq.toFixed(2)} units</p>
                        <p><strong>Total Annual Cost:</strong> $${totalCost.toFixed(2)}</p>
                        <p><strong>Order Frequency:</strong> ${orderFrequency.toFixed(2)} orders per year</p>
                        <p><strong>Interpretation:</strong> Ordering ${eoq.toFixed(2)} units each time minimizes the total inventory cost at $${totalCost.toFixed(2)} per year.</p>
                        <p><strong>Recommendation:</strong> Place ${Math.ceil(orderFrequency)} orders annually to optimize inventory management. Ensure storage capacity supports this order size.</p>
                    `;
                } else if (eoqType === 'shortages') {
                    const shortageCost = parseFloat(document.getElementById('shortageCost').value);
                    if (isNaN(shortageCost)) {
                        resultText = '<p class="text-red-600">Please enter a valid shortage cost.</p>';
                    } else {
                        const eoq = Math.sqrt((2 * demand * orderingCost * (holdingCost + shortageCost)) / (holdingCost * shortageCost));
                        const maxInventory = eoq * (shortageCost / (holdingCost + shortageCost));
                        const maxShortage = eoq * (holdingCost / (holdingCost + shortageCost));
                        const totalCost = Math.sqrt(2 * demand * orderingCost * holdingCost * shortageCost / (holdingCost + shortageCost));
                        resultText = `
                            <p><strong>Optimal Order Quantity (EOQ):</strong> ${eoq.toFixed(2)} units</p>
                            <p><strong>Maximum Inventory Level:</strong> ${maxInventory.toFixed(2)} units</p>
                            <p><strong>Maximum Shortage Level:</strong> ${maxShortage.toFixed(2)} units</p>
                            <p><strong>Total Annual Cost:</strong> $${totalCost.toFixed(2)}</p>
                            <p><strong>Interpretation:</strong> Allowing shortages reduces holding costs but incurs shortage costs. The optimal order size is ${eoq.toFixed(2)} units.</p>
                            <p><strong>Recommendation:</strong> Plan for backorders up to ${maxShortage.toFixed(2)} units and maintain inventory up to ${maxInventory.toFixed(2)} units to balance costs.</p>
                        `;
                    }
                } else if (eoqType === 'discounts') {
                    const price1 = parseFloat(document.getElementById('price1').value);
                    const price2 = parseFloat(document.getElementById('price2').value);
                    if (isNaN(price1) || isNaN(price2)) {
                        resultText = '<p class="text-red-600">Please enter valid prices.</p>';
                    } else {
                        const eoq = Math.sqrt((2 * demand * orderingCost) / holdingCost);
                        const costNoDiscount = demand * price1 + (demand / eoq) * orderingCost + (eoq / 2) * holdingCost;
                        const costWithDiscount = demand * price2 + (demand / 500) * orderingCost + (500 / 2) * holdingCost;
                        const optimalQ = costNoDiscount <= costWithDiscount ? eoq : 500;
                        const totalCost = costNoDiscount <= costWithDiscount ? costNoDiscount : costWithDiscount;
                        resultText = `
                            <p><strong>Optimal Order Quantity:</strong> ${optimalQ.toFixed(2)} units</p>
                            <p><strong>Total Annual Cost:</strong> $${totalCost.toFixed(2)}</p>
                            <p><strong>Interpretation:</strong> ${optimalQ === eoq ? 'Ordering at EOQ without discount is more cost-effective.' : 'Ordering 500 units to avail the discount minimizes total costs.'}</p>
                            <p><strong>Recommendation:</strong> Order ${optimalQ.toFixed(2)} units per order to achieve the lowest total cost, considering the discount threshold.</p>
                        `;
                    }
                }
            }

            document.getElementById('resultContent').innerHTML = resultText;
            document.getElementById('result').classList.remove('hidden');
        }
    </script>
</body>
</html>
